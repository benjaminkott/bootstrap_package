"use strict";!function(){function e(e){var t=e.getSelection(),a=t&&t.getRanges()[0];if(a){for(var r,o,s,l,i=t.createBookmarks(!1)[0],d=i.startNode,u=i.endNode||d,g=a.createIterator(),c=e.editable(),f=null,m=[];f=g.getNextParagraph();)m.push(f);e.getCommand("bootstrappackage_indent").state==CKEDITOR.TRISTATE_OFF?(r=e,s=function(e,t){var n=null,a=null,r=[];for(;t.length>0;){for(a=t.shift();!a.getParent().equals(e);)a=a.getParent();a.equals(n)||(r.push(a),n=a)}return r}(function(e){for(var t=e[0].getParent(),n=null,a=0;a<e.length;a++)n=e[a],t=t.getCommonAncestor(n.getParent());var r={table:1,tbody:1,tr:1,ol:1,ul:1};for(;r[t.getName()];)t=t.getParent();return t}(o=m),o),l=function(e,t){var n=null,a=[];for(;t.length>0;)if("div"==(n=t.shift()).getName()&&n.hasClass("text-indent")){for(var r=new CKEDITOR.dom.documentFragment(e.document);n.getFirst();)r.append(n.getFirst().remove()),a.push(r.getLast());r.replace(n)}else a.push(n);return a}(r,s),function(e,t){var n=e.document.createElement("div"),a=null;for(n.addClass("text-indent"),n.insertBefore(t[0]);t.length>0;)a=t.shift(),n.append(a)}(r,l)):function(e){for(var t=null,a=e.length-1;a>=0;a--)n(t=e[a])&&t.remove()}(function(e){for(var t={},a=[],r=[],o=null,s=null,l=0;l<e.length;l++){var s=null,i=null;if("div"==(o=e[l]).getName()&&o.hasClass("text-indent")&&n(o))a.push(o);else{for(;o.getParent();){if("div"==o.getParent().getName()&&o.getParent().hasClass("text-indent")){s=o.getParent(),i=o;break}o=o.getParent()}s&&i&&!i.getCustomData("move")&&(r.push(i),CKEDITOR.dom.element.setMarker(t,i,"move",!0))}}for(CKEDITOR.dom.element.clearAllMarkers(t);r.length>0;)o=r.shift(),s=o.getParent(),o.getPrevious()?o.getNext()?(o.breakParent(o.getParent()),a.push(o.getNext())):o.remove().insertAfter(s):o.remove().insertBefore(s),s.getCustomData("processed")||(a.push(s),CKEDITOR.dom.element.setMarker(t,s,"processed",!0));return CKEDITOR.dom.element.clearAllMarkers(t),a}(m)),c.contains(d)&&c.contains(u)&&t.selectBookmarks([i]),e.focus()}}function t(e,t){var n=t.block||t.blockLimit,a=e.elementPath(n).contains(function(e){if(e.is("div")&&e.hasClass("text-indent"))return!0},1);this.setState(a?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF)}function n(e){for(var t,n=0,a=e.getChildCount();n<a&&(t=e.getChild(n));n++)if(t.type==CKEDITOR.NODE_ELEMENT&&t.isBlockBoundary())return!1;return!0}CKEDITOR.plugins.add("bootstrappackage_indent",{lang:"en,de",icons:"bootstrappackage_indent",hidpi:!0,init:function(n){n.blockless||(n.addCommand("bootstrappackage_indent",{exec:e,refresh:t,context:"div(text-indent)",allowedContent:"div(!text-indent)",requiredContent:"div(!text-indent)"}),n.ui.addButton&&n.ui.addButton("bootstrappackage_indent",{label:n.lang.bootstrappackage_indent.toolbar,command:"bootstrappackage_indent",toolbar:"blocks"}))}})}();