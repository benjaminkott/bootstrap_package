{namespace bk2k = BK2K\BootstrapPackage\ViewHelpers}
<bk2k:var name="selector" value="{f:if(condition: '{data.image_cssselector}', then:'{data.image_cssselector}', else:'{imagesize.selector}')}" />
<f:if condition="{file -> f:count()} > 4">
<f:format.raw value="{selector}" /><f:format.raw>{
background-repeat:no-repeat;background-position:center center;-webkit-background-size: cover;-moz-background-size: cover;-o-background-size: cover;background-size: cover;
-ms-filter:"progid:DXImageTransform.Microsoft.AlphaImageLoader(src='</f:format.raw>{f:uri.image(image: file.0, width: '{imagesize.lg.width}{imagesize.lg.cropwidth}', height: '{imagesize.lg.height}{imagesize.lg.cropheight}', absolute: settings.absoluteUrl)}<f:format.raw>',sizingMethod='scale')";
}</f:format.raw>
<bk2k:mediaQuery min="lg"><f:format.raw value="{selector}" /><f:format.raw>{background-image:url("</f:format.raw>{f:uri.image(image: file.0, width: '{imagesize.lg.width}{imagesize.lg.cropwidth}', height: '{imagesize.lg.height}{imagesize.lg.cropheight}',  absolute: '{settings.absoluteUrl}')}<f:format.raw>");}</f:format.raw></bk2k:mediaQuery>
<bk2k:mediaQuery min="md" max="lg"><f:format.raw value="{selector}" /><f:format.raw>{background-image:url("</f:format.raw>{f:uri.image(image: file.1, width: '{imagesize.md.width}{imagesize.md.cropwidth}', height: '{imagesize.md.height}{imagesize.md.cropheight}',  absolute: '{settings.absoluteUrl}')}<f:format.raw>");}</f:format.raw></bk2k:mediaQuery>
<bk2k:mediaQuery min="sm" max="md"><f:format.raw value="{selector}" /><f:format.raw>{background-image:url("</f:format.raw>{f:uri.image(image: file.2, width: '{imagesize.sm.width}{imagesize.sm.cropwidth}', height: '{imagesize.sm.height}{imagesize.sm.cropheight}',  absolute: settings.absoluteUrl)}<f:format.raw>");}</f:format.raw></bk2k:mediaQuery>
<bk2k:mediaQuery min="xs" max="sm"><f:format.raw value="{selector}" /><f:format.raw>{background-image:url("</f:format.raw>{f:uri.image(image: file.3, width: '{imagesize.xs.width}{imagesize.xs.cropwidth}', height: '{imagesize.xs.height}{imagesize.xs.cropheight}',  absolute: settings.absoluteUrl)}<f:format.raw>");}</f:format.raw></bk2k:mediaQuery>
<bk2k:mediaQuery max="xs"><f:format.raw value="{selector}" /><f:format.raw>{background-image:url("</f:format.raw>{f:uri.image(image: file.4, width: '{imagesize.xxs.width}{imagesize.xxs.cropwidth}', height: '{imagesize.xxs.height}{imagesize.xxs.cropheight}',  absolute: settings.absoluteUrl)}<f:format.raw>");}</f:format.raw></bk2k:mediaQuery>
</f:if>
